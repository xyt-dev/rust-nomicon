# Ǟʟȶɛʀռǟȶɨʋɛ ʀɛքʀɛֆɛռȶǟȶɨօռֆ

Ʀʊֆȶ ǟʟʟօաֆ ʏօʊ ȶօ ֆքɛƈɨʄʏ ǟʟȶɛʀռǟȶɨʋɛ ɖǟȶǟ ʟǟʏօʊȶ ֆȶʀǟȶɛɢɨɛֆ ʄʀօʍ ȶɦɛ ɖɛʄǟʊʟȶ.

## ʀɛքʀ(Ƈ)

Ƭɦɨֆ ɨֆ ȶɦɛ ʍօֆȶ ɨʍքօʀȶǟռȶ `ʀɛքʀ`. Ɨȶ ɦǟֆ ʄǟɨʀʟʏ ֆɨʍքʟɛ ɨռȶɛռȶ: ɖօ աɦǟȶ Ƈ ɖօɛֆ.
Ƭɦɛ օʀɖɛʀ, ֆɨʐɛ, ǟռɖ ǟʟɨɢռʍɛռȶ օʄ ʄɨɛʟɖֆ ɨֆ ɛӼǟƈȶʟʏ աɦǟȶ ʏօʊ աօʊʟɖ ɛӼքɛƈȶ ʄʀօʍ Ƈ
օʀ Ƈ++. Ƭɦɛ ȶʏքɛ ɨֆ ǟʟֆօ քǟֆֆɛɖ ǟƈʀօֆֆ `ɛӼȶɛʀռ "Ƈ"` ʄʊռƈȶɨօռ ƈǟʟʟ ɮօʊռɖǟʀɨɛֆ ȶɦɛ
ֆǟʍɛ աǟʏ Ƈ աօʊʟɖ քǟֆֆ ȶɦɛ ƈօʀʀɛֆքօռɖɨռɢ ȶʏքɛ. Ǟռʏ ȶʏքɛ ʏօʊ ɛӼքɛƈȶ ȶօ քǟֆֆ ȶɦʀօʊɢɦ ǟռ ƑƑƗ ɮօʊռɖǟʀʏ ֆɦօʊʟɖ ɦǟʋɛ
`ʀɛքʀ(Ƈ)`, ǟֆ Ƈ ɨֆ ȶɦɛ ʟɨռɢʊǟ-ʄʀǟռƈǟ օʄ ȶɦɛ քʀօɢʀǟʍʍɨռɢ աօʀʟɖ. Ƭɦɨֆ ɨֆ ǟʟֆօ
ռɛƈɛֆֆǟʀʏ ȶօ ֆօʊռɖʟʏ ɖօ ʍօʀɛ ɛʟǟɮօʀǟȶɛ ȶʀɨƈӄֆ աɨȶɦ ɖǟȶǟ ʟǟʏօʊȶ ֆʊƈɦ ǟֆ
ʀɛɨռȶɛʀքʀɛȶɨռɢ ʋǟʟʊɛֆ ǟֆ ǟ ɖɨʄʄɛʀɛռȶ ȶʏքɛ.

Ɯɛ ֆȶʀօռɢʟʏ ʀɛƈօʍʍɛռɖ ʊֆɨռɢ [ʀʊֆȶ-ɮɨռɖɢɛռ] ǟռɖ/օʀ [ƈɮɨռɖɢɛռ] ȶօ ʍǟռǟɢɛ ʏօʊʀ ƑƑƗ
ɮօʊռɖǟʀɨɛֆ ʄօʀ ʏօʊ. Ƭɦɛ Ʀʊֆȶ ȶɛǟʍ աօʀӄֆ ƈʟօֆɛʟʏ աɨȶɦ ȶɦօֆɛ քʀօʝɛƈȶֆ ȶօ ɛռֆʊʀɛ
ȶɦǟȶ ȶɦɛʏ աօʀӄ ʀօɮʊֆȶʟʏ ǟռɖ ǟʀɛ ƈօʍքǟȶɨɮʟɛ աɨȶɦ ƈʊʀʀɛռȶ ǟռɖ ʄʊȶʊʀɛ ɢʊǟʀǟռȶɛɛֆ
ǟɮօʊȶ ȶʏքɛ ʟǟʏօʊȶֆ ǟռɖ `ʀɛքʀ`ֆ.

Ƭɦɛ ɨռȶɛʀǟƈȶɨօռ օʄ `ʀɛքʀ(Ƈ)` աɨȶɦ Ʀʊֆȶ'ֆ ʍօʀɛ ɛӼօȶɨƈ ɖǟȶǟ ʟǟʏօʊȶ ʄɛǟȶʊʀɛֆ ʍʊֆȶ ɮɛ
ӄɛքȶ ɨռ ʍɨռɖ. Ɖʊɛ ȶօ ɨȶֆ ɖʊǟʟ քʊʀքօֆɛ ǟֆ "ʄօʀ ƑƑƗ" ǟռɖ "ʄօʀ ʟǟʏօʊȶ ƈօռȶʀօʟ",
`ʀɛքʀ(Ƈ)` ƈǟռ ɮɛ ǟքքʟɨɛɖ ȶօ ȶʏքɛֆ ȶɦǟȶ աɨʟʟ ɮɛ ռօռֆɛռֆɨƈǟʟ օʀ քʀօɮʟɛʍǟȶɨƈ ɨʄ
քǟֆֆɛɖ ȶɦʀօʊɢɦ ȶɦɛ ƑƑƗ ɮօʊռɖǟʀʏ.

* ȤՖƬֆ ǟʀɛ ֆȶɨʟʟ ʐɛʀօ-ֆɨʐɛɖ, ɛʋɛռ ȶɦօʊɢɦ ȶɦɨֆ ɨֆ ռօȶ ǟ ֆȶǟռɖǟʀɖ ɮɛɦǟʋɨօʀ ɨռ
Ƈ, ǟռɖ ɨֆ ɛӼքʟɨƈɨȶʟʏ ƈօռȶʀǟʀʏ ȶօ ȶɦɛ ɮɛɦǟʋɨօʀ օʄ ǟռ ɛʍքȶʏ ȶʏքɛ ɨռ Ƈ++, աɦɨƈɦ
ֆǟʏֆ ȶɦɛʏ ֆɦօʊʟɖ ֆȶɨʟʟ ƈօռֆʊʍɛ ǟ ɮʏȶɛ օʄ ֆքǟƈɛ.

* ƉՖƬ քօɨռȶɛʀֆ (աɨɖɛ քօɨռȶɛʀֆ) ǟռɖ ȶʊքʟɛֆ ǟʀɛ ռօȶ ǟ ƈօռƈɛքȶ
  ɨռ Ƈ, ǟռɖ ǟֆ ֆʊƈɦ ǟʀɛ ռɛʋɛʀ ƑƑƗ-ֆǟʄɛ.

* Ɛռʊʍֆ աɨȶɦ ʄɨɛʟɖֆ ǟʟֆօ ǟʀɛռ'ȶ ǟ ƈօռƈɛքȶ ɨռ Ƈ օʀ Ƈ++, ɮʊȶ ǟ ʋǟʟɨɖ ɮʀɨɖɢɨռɢ
  օʄ ȶɦɛ ȶʏքɛֆ [ɨֆ ɖɛʄɨռɛɖ][ʀɛǟʟʟʏ-ȶǟɢɢɛɖ].

* Ɨʄ `Ƭ` ɨֆ ǟռ [ƑƑƗ-ֆǟʄɛ ռօռ-ռʊʟʟǟɮʟɛ քօɨռȶɛʀ ȶʏքɛ](ffi.html#the-nullable-pointer-optimization),
  `Øքȶɨօռ<Ƭ>` ɨֆ ɢʊǟʀǟռȶɛɛɖ ȶօ ɦǟʋɛ ȶɦɛ ֆǟʍɛ ʟǟʏօʊȶ ǟռɖ ǞƁƗ ǟֆ `Ƭ` ǟռɖ ɨֆ
  ȶɦɛʀɛʄօʀɛ ǟʟֆօ ƑƑƗ-ֆǟʄɛ. Ǟֆ օʄ ȶɦɨֆ աʀɨȶɨռɢ, ȶɦɨֆ ƈօʋɛʀֆ `&`, `&ʍʊȶ`,
  ǟռɖ ʄʊռƈȶɨօռ քօɨռȶɛʀֆ, ǟʟʟ օʄ աɦɨƈɦ ƈǟռ ռɛʋɛʀ ɮɛ ռʊʟʟ.

* Ƭʊքʟɛ ֆȶʀʊƈȶֆ ǟʀɛ ʟɨӄɛ ֆȶʀʊƈȶֆ աɨȶɦ ʀɛɢǟʀɖֆ ȶօ `ʀɛքʀ(Ƈ)`, ǟֆ ȶɦɛ օռʟʏ
  ɖɨʄʄɛʀɛռƈɛ ʄʀօʍ ǟ ֆȶʀʊƈȶ ɨֆ ȶɦǟȶ ȶɦɛ ʄɨɛʟɖֆ ǟʀɛռ’ȶ ռǟʍɛɖ.

* `ʀɛքʀ(Ƈ)` ɨֆ ɛզʊɨʋǟʟɛռȶ ȶօ օռɛ օʄ `ʀɛքʀ(ʊ*)` (ֆɛɛ ȶɦɛ ռɛӼȶ ֆɛƈȶɨօռ) ʄօʀ
ʄɨɛʟɖʟɛֆֆ ɛռʊʍֆ. Ƭɦɛ ƈɦօֆɛռ ֆɨʐɛ ǟռɖ ֆɨɢռ ɨֆ ȶɦɛ ɖɛʄǟʊʟȶ ɛռʊʍ ֆɨʐɛ ǟռɖ ֆɨɢռ ʄօʀ ȶɦɛ ȶǟʀɢɛȶ քʟǟȶʄօʀʍ'ֆ Ƈ
ǟքքʟɨƈǟȶɨօռ ɮɨռǟʀʏ ɨռȶɛʀʄǟƈɛ (ǞƁƗ). Ռօȶɛ ȶɦǟȶ ɛռʊʍ ʀɛքʀɛֆɛռȶǟȶɨօռ ɨռ Ƈ ɨֆ ɨʍքʟɛʍɛռȶǟȶɨօռ
ɖɛʄɨռɛɖ, ֆօ ȶɦɨֆ ɨֆ ʀɛǟʟʟʏ ǟ "ɮɛֆȶ ɢʊɛֆֆ". Ɨռ քǟʀȶɨƈʊʟǟʀ, ȶɦɨֆ ʍǟʏ ɮɛ ɨռƈօʀʀɛƈȶ
աɦɛռ ȶɦɛ Ƈ ƈօɖɛ օʄ ɨռȶɛʀɛֆȶ ɨֆ ƈօʍքɨʟɛɖ աɨȶɦ ƈɛʀȶǟɨռ ʄʟǟɢֆ.

* Ƒɨɛʟɖʟɛֆֆ ɛռʊʍֆ աɨȶɦ `ʀɛքʀ(Ƈ)` օʀ `ʀɛքʀ(ʊ*)` ֆȶɨʟʟ ʍǟʏ ռօȶ ɮɛ ֆɛȶ ȶօ ǟռ
ɨռȶɛɢɛʀ ʋǟʟʊɛ աɨȶɦօʊȶ ǟ ƈօʀʀɛֆքօռɖɨռɢ ʋǟʀɨǟռȶ, ɛʋɛռ ȶɦօʊɢɦ ȶɦɨֆ ɨֆ
քɛʀʍɨȶȶɛɖ ɮɛɦǟʋɨօʀ ɨռ Ƈ օʀ Ƈ++. Ɨȶ ɨֆ ʊռɖɛʄɨռɛɖ ɮɛɦǟʋɨօʀ ȶօ (ʊռֆǟʄɛʟʏ)
ƈօռֆȶʀʊƈȶ ǟռ ɨռֆȶǟռƈɛ օʄ ǟռ ɛռʊʍ ȶɦǟȶ ɖօɛֆ ռօȶ ʍǟȶƈɦ օռɛ օʄ ɨȶֆ
ʋǟʀɨǟռȶֆ. (Ƭɦɨֆ ǟʟʟօաֆ ɛӼɦǟʊֆȶɨʋɛ ʍǟȶƈɦɛֆ ȶօ ƈօռȶɨռʊɛ ȶօ ɮɛ աʀɨȶȶɛռ ǟռɖ
ƈօʍքɨʟɛɖ ǟֆ ռօʀʍǟʟ.)

## ʀɛքʀ(ȶʀǟռֆքǟʀɛռȶ)

`#[ʀɛքʀ(ȶʀǟռֆքǟʀɛռȶ)]` ƈǟռ օռʟʏ ɮɛ ʊֆɛɖ օռ ǟ ֆȶʀʊƈȶ օʀ ֆɨռɢʟɛ-ʋǟʀɨǟռȶ ɛռʊʍ ȶɦǟȶ ɦǟֆ ǟ ֆɨռɢʟɛ ռօռ-ʐɛʀօ-ֆɨʐɛɖ ʄɨɛʟɖ (ȶɦɛʀɛ ʍǟʏ ɮɛ ǟɖɖɨȶɨօռǟʟ ʐɛʀօ-ֆɨʐɛɖ ʄɨɛʟɖֆ).
Ƭɦɛ ɛʄʄɛƈȶ ɨֆ ȶɦǟȶ ȶɦɛ ʟǟʏօʊȶ ǟռɖ ǞƁƗ օʄ ȶɦɛ աɦօʟɛ ֆȶʀʊƈȶ/ɛռʊʍ ɨֆ ɢʊǟʀǟռȶɛɛɖ ȶօ ɮɛ ȶɦɛ ֆǟʍɛ ǟֆ ȶɦǟȶ օռɛ ʄɨɛʟɖ.

> ՌØƬƐ: Ƭɦɛʀɛ'ֆ ǟ `ȶʀǟռֆքǟʀɛռȶ_ʊռɨօռֆ` ռɨɢɦȶʟʏ ʄɛǟȶʊʀɛ ȶօ ǟքքʟʏ `ʀɛքʀ(ȶʀǟռֆքǟʀɛռȶ)` ȶօ ʊռɨօռֆ,
> ɮʊȶ ɨȶ ɦǟֆռ'ȶ ɮɛɛռ ֆȶǟɮɨʟɨʐɛɖ ɖʊɛ ȶօ ɖɛֆɨɢռ ƈօռƈɛʀռֆ. Ֆɛɛ ȶɦɛ [ȶʀǟƈӄɨռɢ ɨֆֆʊɛ][ɨֆֆʊɛ-60405] ʄօʀ ʍօʀɛ ɖɛȶǟɨʟֆ.

Ƭɦɛ ɢօǟʟ ɨֆ ȶօ ʍǟӄɛ ɨȶ քօֆֆɨɮʟɛ ȶօ ȶʀǟռֆʍʊȶɛ ɮɛȶաɛɛռ ȶɦɛ ֆɨռɢʟɛ ʄɨɛʟɖ ǟռɖ ȶɦɛ
ֆȶʀʊƈȶ/ɛռʊʍ. Ǟռ ɛӼǟʍքʟɛ օʄ ȶɦǟȶ ɨֆ [`ƱռֆǟʄɛƇɛʟʟ`], աɦɨƈɦ ƈǟռ ɮɛ ȶʀǟռֆʍʊȶɛɖ ɨռȶօ
ȶɦɛ ȶʏքɛ ɨȶ աʀǟքֆ ([`ƱռֆǟʄɛƇɛʟʟ`] ǟʟֆօ ʊֆɛֆ ȶɦɛ ʊռֆȶǟɮʟɛ [ռօ_ռɨƈɦɛ][ռօ-ռɨƈɦɛ-քʊʟʟ],
ֆօ ɨȶֆ ǞƁƗ ɨֆ ռօȶ ǟƈȶʊǟʟʟʏ ɢʊǟʀǟռȶɛɛɖ ȶօ ɮɛ ȶɦɛ ֆǟʍɛ աɦɛռ ռɛֆȶɛɖ ɨռ օȶɦɛʀ ȶʏքɛֆ).

Ǟʟֆօ, քǟֆֆɨռɢ ȶɦɛ ֆȶʀʊƈȶ/ɛռʊʍ ȶɦʀօʊɢɦ ƑƑƗ աɦɛʀɛ ȶɦɛ ɨռռɛʀ ʄɨɛʟɖ ȶʏքɛ ɨֆ ɛӼքɛƈȶɛɖ օռ
ȶɦɛ օȶɦɛʀ ֆɨɖɛ ɨֆ ɢʊǟʀǟռȶɛɛɖ ȶօ աօʀӄ. Ɨռ քǟʀȶɨƈʊʟǟʀ, ȶɦɨֆ ɨֆ ռɛƈɛֆֆǟʀʏ ʄօʀ
`ֆȶʀʊƈȶ Ƒօօ(ʄ32)` օʀ `ɛռʊʍ Ƒօօ { Ɓǟʀ(ʄ32) }` ȶօ ǟʟաǟʏֆ ɦǟʋɛ ȶɦɛ ֆǟʍɛ ǞƁƗ ǟֆ `ʄ32`.

Ƭɦɨֆ ʀɛքʀ ɨֆ օռʟʏ ƈօռֆɨɖɛʀɛɖ քǟʀȶ օʄ ȶɦɛ քʊɮʟɨƈ ǞƁƗ օʄ ǟ ȶʏքɛ ɨʄ ɛɨȶɦɛʀ ȶɦɛ ֆɨռɢʟɛ
ʄɨɛʟɖ ɨֆ `քʊɮ`, օʀ ɨʄ ɨȶֆ ʟǟʏօʊȶ ɨֆ ɖօƈʊʍɛռȶɛɖ ɨռ քʀօֆɛ. Øȶɦɛʀաɨֆɛ, ȶɦɛ ʟǟʏօʊȶ ֆɦօʊʟɖ
ռօȶ ɮɛ ʀɛʟɨɛɖ ʊքօռ ɮʏ օȶɦɛʀ ƈʀǟȶɛֆ.

Ɱօʀɛ ɖɛȶǟɨʟֆ ǟʀɛ ɨռ ȶɦɛ [ƦƑƇ 1758][ʀʄƈ-ȶʀǟռֆքǟʀɛռȶ] ǟռɖ ȶɦɛ [ƦƑƇ 2645][ʀʄƈ-ȶʀǟռֆքǟʀɛռȶ-ʊռɨօռֆ-ɛռʊʍֆ].

## ʀɛքʀ(ʊ*), ʀɛքʀ(ɨ*)

Ƭɦɛֆɛ ֆքɛƈɨʄʏ ȶɦɛ ֆɨʐɛ ǟռɖ ֆɨɢռ ȶօ ʍǟӄɛ ǟ ʄɨɛʟɖʟɛֆֆ ɛռʊʍ. Ɨʄ ȶɦɛ ɖɨֆƈʀɨʍɨռǟռȶ օʋɛʀʄʟօաֆ
ȶɦɛ ɨռȶɛɢɛʀ ɨȶ ɦǟֆ ȶօ ʄɨȶ ɨռ, ɨȶ աɨʟʟ քʀօɖʊƈɛ ǟ ƈօʍքɨʟɛ-ȶɨʍɛ ɛʀʀօʀ. Ƴօʊ ƈǟռ
ʍǟռʊǟʟʟʏ ǟֆӄ Ʀʊֆȶ ȶօ ǟʟʟօա ȶɦɨֆ ɮʏ ֆɛȶȶɨռɢ ȶɦɛ օʋɛʀʄʟօաɨռɢ ɛʟɛʍɛռȶ ȶօ ɛӼքʟɨƈɨȶʟʏ
ɮɛ 0. Ӈօաɛʋɛʀ Ʀʊֆȶ աɨʟʟ ռօȶ ǟʟʟօա ʏօʊ ȶօ ƈʀɛǟȶɛ ǟռ ɛռʊʍ աɦɛʀɛ ȶաօ ʋǟʀɨǟռȶֆ ɦǟʋɛ
ȶɦɛ ֆǟʍɛ ɖɨֆƈʀɨʍɨռǟռȶ.

Ƭɦɛ ȶɛʀʍ "ʄɨɛʟɖʟɛֆֆ ɛռʊʍ" օռʟʏ ʍɛǟռֆ ȶɦǟȶ ȶɦɛ ɛռʊʍ ɖօɛֆռ'ȶ ɦǟʋɛ ɖǟȶǟ ɨռ ǟռʏ
օʄ ɨȶֆ ʋǟʀɨǟռȶֆ. Ǟ ʄɨɛʟɖʟɛֆֆ ɛռʊʍ աɨȶɦօʊȶ ǟ `ʀɛքʀ` ɨֆ
ֆȶɨʟʟ ǟ Ʀʊֆȶ ռǟȶɨʋɛ ȶʏքɛ, ǟռɖ ɖօɛֆ ռօȶ ɦǟʋɛ ǟ ֆȶǟɮʟɛ ʟǟʏօʊȶ օʀ ʀɛքʀɛֆɛռȶǟȶɨօռ.
Ǟɖɖɨռɢ ǟ `ʀɛքʀ(ʊ*)`/`ʀɛքʀ(ɨ*)` ƈǟʊֆɛֆ ɨȶ ȶօ ɮɛ ȶʀɛǟȶɛɖ ɛӼǟƈȶʟʏ ʟɨӄɛ ȶɦɛ ֆքɛƈɨʄɨɛɖ
ɨռȶɛɢɛʀ ȶʏքɛ ʄօʀ ʟǟʏօʊȶ քʊʀքօֆɛֆ (ɛӼƈɛքȶ ȶɦǟȶ ȶɦɛ ƈօʍքɨʟɛʀ աɨʟʟ ֆȶɨʟʟ ɛӼքʟօɨȶ ɨȶֆ
ӄռօաʟɛɖɢɛ օʄ "ɨռʋǟʟɨɖ" ʋǟʟʊɛֆ ǟȶ ȶɦɨֆ ȶʏքɛ ȶօ օքȶɨʍɨʐɛ ɛռʊʍ ʟǟʏօʊȶ, ֆʊƈɦ ǟֆ աɦɛռ
ȶɦɨֆ ɛռʊʍ ɨֆ աʀǟքքɛɖ ɨռ `Øքȶɨօռ`). Ռօȶɛ ȶɦǟȶ ȶɦɛ ʄʊռƈȶɨօռ ƈǟʟʟ ǞƁƗ ʄօʀ ȶɦɛֆɛ
ȶʏքɛֆ ɨֆ ֆȶɨʟʟ ɨռ ɢɛռɛʀǟʟ ʊռֆքɛƈɨʄɨɛɖ, ɛӼƈɛքȶ ȶɦǟȶ ǟƈʀօֆֆ `ɛӼȶɛʀռ "Ƈ"` ƈǟʟʟֆ ȶɦɛʏ
ǟʀɛ ǞƁƗ-ƈօʍքǟȶɨɮʟɛ աɨȶɦ Ƈ ɛռʊʍֆ օʄ ȶɦɛ ֆǟʍɛ ֆɨɢռ ǟռɖ ֆɨʐɛ.

Ɨʄ ȶɦɛ ɛռʊʍ ɦǟֆ ʄɨɛʟɖֆ, ȶɦɛ ɛʄʄɛƈȶ ɨֆ ֆɨʍɨʟǟʀ ȶօ ȶɦɛ ɛʄʄɛƈȶ օʄ `ʀɛքʀ(Ƈ)`
ɨռ ȶɦǟȶ ȶɦɛʀɛ ɨֆ ǟ ɖɛʄɨռɛɖ ʟǟʏօʊȶ օʄ ȶɦɛ ȶʏքɛ. Ƭɦɨֆ ʍǟӄɛֆ ɨȶ քօֆֆɨɮʟɛ ȶօ
քǟֆֆ ȶɦɛ ɛռʊʍ ȶօ Ƈ ƈօɖɛ, օʀ ǟƈƈɛֆֆ ȶɦɛ ȶʏքɛ'ֆ ʀǟա ʀɛքʀɛֆɛռȶǟȶɨօռ ǟռɖ ɖɨʀɛƈȶʟʏ
ʍǟռɨքʊʟǟȶɛ ɨȶֆ ȶǟɢ ǟռɖ ʄɨɛʟɖֆ. Ֆɛɛ [ȶɦɛ ƦƑƇ][ʀɛǟʟʟʏ-ȶǟɢɢɛɖ] ʄօʀ ɖɛȶǟɨʟֆ.

Ƭɦɛֆɛ `ʀɛքʀ`ֆ ɦǟʋɛ ռօ ɛʄʄɛƈȶ օռ ǟ ֆȶʀʊƈȶ.

Ǟɖɖɨռɢ ǟռ ɛӼքʟɨƈɨȶ `ʀɛքʀ(ʊ*)`, `ʀɛքʀ(ɨ*)`, օʀ `ʀɛքʀ(Ƈ)` ȶօ ǟռ ɛռʊʍ աɨȶɦ ʄɨɛʟɖֆ ֆʊքքʀɛֆֆɛֆ ȶɦɛ ռʊʟʟ-քօɨռȶɛʀ օքȶɨʍɨʐǟȶɨօռ, ʟɨӄɛ:

```rust
# use std::mem::size_of;
enum MyOption<T> {
    Some(T),
    None,
}

#[repr(u8)]
enum MyReprOption<T> {
    Some(T),
    None,
}

assert_eq!(8, size_of::<MyOption<&u16>>());
assert_eq!(16, size_of::<MyReprOption<&u16>>());
```

Ƭɦɨֆ օքȶɨʍɨʐǟȶɨօռ ֆȶɨʟʟ ǟքքʟɨɛֆ ȶօ ʄɨɛʟɖʟɛֆֆ ɛռʊʍֆ աɨȶɦ ǟռ ɛӼքʟɨƈɨȶ `ʀɛքʀ(ʊ*)`, `ʀɛքʀ(ɨ*)`, օʀ `ʀɛքʀ(Ƈ)`.

## ʀɛքʀ(քǟƈӄɛɖ), ʀɛքʀ(քǟƈӄɛɖ(ռ))

`ʀɛքʀ(քǟƈӄɛɖ(ռ))` (աɦɛʀɛ `ռ` ɨֆ ǟ քօաɛʀ օʄ ȶաօ) ʄօʀƈɛֆ ȶɦɛ ȶʏքɛ ȶօ ɦǟʋɛ ǟռ
ǟʟɨɢռʍɛռȶ օʄ *ǟȶ ʍօֆȶ* `ռ`. Ɱօֆȶ ƈօʍʍօռʟʏ ʊֆɛɖ աɨȶɦօʊȶ ǟռ ɛӼքʟɨƈɨȶ `ռ`,
`ʀɛքʀ(քǟƈӄɛɖ)` ɨֆ ɛզʊɨʋǟʟɛռȶ ȶօ `ʀɛքʀ(քǟƈӄɛɖ(1))` աɦɨƈɦ ʄօʀƈɛֆ Ʀʊֆȶ ȶօ ֆȶʀɨք
ǟռʏ քǟɖɖɨռɢ, ǟռɖ օռʟʏ ǟʟɨɢռ ȶɦɛ ȶʏքɛ ȶօ ǟ ɮʏȶɛ. Ƭɦɨֆ ʍǟʏ ɨʍքʀօʋɛ ȶɦɛ ʍɛʍօʀʏ
ʄօօȶքʀɨռȶ, ɮʊȶ աɨʟʟ ʟɨӄɛʟʏ ɦǟʋɛ օȶɦɛʀ ռɛɢǟȶɨʋɛ ֆɨɖɛ-ɛʄʄɛƈȶֆ.

Ɨռ քǟʀȶɨƈʊʟǟʀ, ʍօֆȶ ǟʀƈɦɨȶɛƈȶʊʀɛֆ *ֆȶʀօռɢʟʏ* քʀɛʄɛʀ ʋǟʟʊɛֆ ȶօ ɮɛ ռǟȶʊʀǟʟʟʏ
ǟʟɨɢռɛɖ. Ƭɦɨֆ ʍǟʏ ʍɛǟռ ȶɦǟȶ ʊռǟʟɨɢռɛɖ ʟօǟɖֆ ǟʀɛ քɛռǟʟɨʐɛɖ (Ӽ86), օʀ ɛʋɛռ ʄǟʊʟȶ
(ֆօʍɛ ǞƦⱮ ƈɦɨքֆ). Ƒօʀ ֆɨʍքʟɛ ƈǟֆɛֆ ʟɨӄɛ ɖɨʀɛƈȶʟʏ ʟօǟɖɨռɢ օʀ ֆȶօʀɨռɢ ǟ քǟƈӄɛɖ
ʄɨɛʟɖ, ȶɦɛ ƈօʍքɨʟɛʀ ʍɨɢɦȶ ɮɛ ǟɮʟɛ ȶօ քǟքɛʀ օʋɛʀ ǟʟɨɢռʍɛռȶ ɨֆֆʊɛֆ աɨȶɦ ֆɦɨʄȶֆ
ǟռɖ ʍǟֆӄֆ. Ӈօաɛʋɛʀ ɨʄ ʏօʊ ȶǟӄɛ ǟ ʀɛʄɛʀɛռƈɛ ȶօ ǟ քǟƈӄɛɖ ʄɨɛʟɖ, ɨȶ'ֆ ʊռʟɨӄɛʟʏ
ȶɦǟȶ ȶɦɛ ƈօʍքɨʟɛʀ աɨʟʟ ɮɛ ǟɮʟɛ ȶօ ɛʍɨȶ ƈօɖɛ ȶօ ǟʋօɨɖ ǟռ ʊռǟʟɨɢռɛɖ ʟօǟɖ.

[Ǟֆ ȶɦɨֆ ƈǟռ ƈǟʊֆɛ ʊռɖɛʄɨռɛɖ ɮɛɦǟʋɨօʀ][ʊɮ ʟօǟɖֆ], ȶɦɛ ʟɨռȶ ɦǟֆ ɮɛɛռ ɨʍքʟɛʍɛռȶɛɖ
ǟռɖ ɨȶ աɨʟʟ ɮɛƈօʍɛ ǟ ɦǟʀɖ ɛʀʀօʀ.

`ʀɛքʀ(քǟƈӄɛɖ)/ʀɛքʀ(քǟƈӄɛɖ(ռ))` ɨֆ ռօȶ ȶօ ɮɛ ʊֆɛɖ ʟɨɢɦȶʟʏ. Ʊռʟɛֆֆ ʏօʊ ɦǟʋɛ
ɛӼȶʀɛʍɛ ʀɛզʊɨʀɛʍɛռȶֆ, ȶɦɨֆ ֆɦօʊʟɖ ռօȶ ɮɛ ʊֆɛɖ.

Ƭɦɨֆ ʀɛքʀ ɨֆ ǟ ʍօɖɨʄɨɛʀ օռ `ʀɛքʀ(Ƈ)` ǟռɖ `ʀɛքʀ(Ʀʊֆȶ)`. Ƒօʀ ƑƑƗ ƈօʍքǟȶɨɮɨʟɨȶʏ
ʏօʊ ʍօֆȶ ʟɨӄɛʟʏ ǟʟաǟʏֆ աǟռȶ ȶօ ɮɛ ɛӼքʟɨƈɨȶ: `ʀɛքʀ(Ƈ, քǟƈӄɛɖ)`.

## ʀɛքʀ(ǟʟɨɢռ(ռ))

`ʀɛքʀ(ǟʟɨɢռ(ռ))` (աɦɛʀɛ `ռ` ɨֆ ǟ քօաɛʀ օʄ ȶաօ) ʄօʀƈɛֆ ȶɦɛ ȶʏքɛ ȶօ ɦǟʋɛ ǟռ
ǟʟɨɢռʍɛռȶ օʄ *ǟȶ ʟɛǟֆȶ* `ռ`.

Ƭɦɨֆ ɛռǟɮʟɛֆ ֆɛʋɛʀǟʟ ȶʀɨƈӄֆ, ʟɨӄɛ ʍǟӄɨռɢ ֆʊʀɛ ռɛɨɢɦɮօʀɨռɢ ɛʟɛʍɛռȶֆ օʄ ǟռ ǟʀʀǟʏ
ռɛʋɛʀ ֆɦǟʀɛ ȶɦɛ ֆǟʍɛ ƈǟƈɦɛ ʟɨռɛ աɨȶɦ ɛǟƈɦ օȶɦɛʀ (աɦɨƈɦ ʍǟʏ ֆքɛɛɖ ʊք ƈɛʀȶǟɨռ
ӄɨռɖֆ օʄ ƈօռƈʊʀʀɛռȶ ƈօɖɛ).

Ƭɦɨֆ ɨֆ ǟ ʍօɖɨʄɨɛʀ օռ `ʀɛքʀ(Ƈ)` ǟռɖ `ʀɛքʀ(Ʀʊֆȶ)`. Ɨȶ ɨֆ ɨռƈօʍքǟȶɨɮʟɛ աɨȶɦ
`ʀɛքʀ(քǟƈӄɛɖ)`.

[ɖʀօք ʄʟǟɢֆ]: drop-flags.html
[ʊɮ ʟօǟɖֆ]: https://github.com/rust-lang/rust/issues/27060
[ɨֆֆʊɛ-60405]: https://github.com/rust-lang/rust/issues/60405
[`ƱռֆǟʄɛƇɛʟʟ`]: https://doc.rust-lang.org/std/cell/struct.UnsafeCell.html
[ʀʄƈ-ȶʀǟռֆքǟʀɛռȶ]: https://github.com/rust-lang/rfcs/blob/master/text/1758-repr-transparent.md
[ʀʄƈ-ȶʀǟռֆքǟʀɛռȶ-ʊռɨօռֆ-ɛռʊʍֆ]: https://rust-lang.github.io/rfcs/2645-transparent-unions.html
[ʀɛǟʟʟʏ-ȶǟɢɢɛɖ]: https://github.com/rust-lang/rfcs/blob/master/text/2195-really-tagged-unions.md
[ʀʊֆȶ-ɮɨռɖɢɛռ]: https://rust-lang.github.io/rust-bindgen/
[ƈɮɨռɖɢɛռ]: https://github.com/eqrion/cbindgen
[ռօ-ռɨƈɦɛ-քʊʟʟ]: https://github.com/rust-lang/rust/pull/68491
