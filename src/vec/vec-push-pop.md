# Քʊֆɦ ǟռɖ Քօք

Ǟʟʀɨɢɦȶ. Ɯɛ ƈǟռ ɨռɨȶɨǟʟɨʐɛ. Ɯɛ ƈǟռ ǟʟʟօƈǟȶɛ. Łɛȶ'ֆ ǟƈȶʊǟʟʟʏ ɨʍքʟɛʍɛռȶ ֆօʍɛ
ʄʊռƈȶɨօռǟʟɨȶʏ! Łɛȶ'ֆ ֆȶǟʀȶ աɨȶɦ `քʊֆɦ`. Ǟʟʟ ɨȶ ռɛɛɖֆ ȶօ ɖօ ɨֆ ƈɦɛƈӄ ɨʄ աɛ'ʀɛ
ʄʊʟʟ ȶօ ɢʀօա, ʊռƈօռɖɨȶɨօռǟʟʟʏ աʀɨȶɛ ȶօ ȶɦɛ ռɛӼȶ ɨռɖɛӼ, ǟռɖ ȶɦɛռ ɨռƈʀɛʍɛռȶ օʊʀ
ʟɛռɢȶɦ.

Ƭօ ɖօ ȶɦɛ աʀɨȶɛ աɛ ɦǟʋɛ ȶօ ɮɛ ƈǟʀɛʄʊʟ ռօȶ ȶօ ɛʋǟʟʊǟȶɛ ȶɦɛ ʍɛʍօʀʏ աɛ աǟռȶ ȶօ աʀɨȶɛ
ȶօ. Ǟȶ աօʀֆȶ, ɨȶ'ֆ ȶʀʊʟʏ ʊռɨռɨȶɨǟʟɨʐɛɖ ʍɛʍօʀʏ ʄʀօʍ ȶɦɛ ǟʟʟօƈǟȶօʀ. Ǟȶ ɮɛֆȶ ɨȶ'ֆ ȶɦɛ
ɮɨȶֆ օʄ ֆօʍɛ օʟɖ ʋǟʟʊɛ աɛ քօքքɛɖ օʄʄ. Ɛɨȶɦɛʀ աǟʏ, աɛ ƈǟռ'ȶ ʝʊֆȶ ɨռɖɛӼ ȶօ ȶɦɛ ʍɛʍօʀʏ
ǟռɖ ɖɛʀɛʄɛʀɛռƈɛ ɨȶ, ɮɛƈǟʊֆɛ ȶɦǟȶ աɨʟʟ ɛʋǟʟʊǟȶɛ ȶɦɛ ʍɛʍօʀʏ ǟֆ ǟ ʋǟʟɨɖ ɨռֆȶǟռƈɛ օʄ
Ƭ. Ɯօʀֆɛ, `ʄօօ[ɨɖӼ] = Ӽ` աɨʟʟ ȶʀʏ ȶօ ƈǟʟʟ `ɖʀօք` օռ ȶɦɛ օʟɖ ʋǟʟʊɛ օʄ `ʄօօ[ɨɖӼ]`!

Ƭɦɛ ƈօʀʀɛƈȶ աǟʏ ȶօ ɖօ ȶɦɨֆ ɨֆ աɨȶɦ `քȶʀ::աʀɨȶɛ`, աɦɨƈɦ ʝʊֆȶ ɮʟɨռɖʟʏ օʋɛʀաʀɨȶɛֆ ȶɦɛ
ȶǟʀɢɛȶ ǟɖɖʀɛֆֆ աɨȶɦ ȶɦɛ ɮɨȶֆ օʄ ȶɦɛ ʋǟʟʊɛ աɛ քʀօʋɨɖɛ. Ռօ ɛʋǟʟʊǟȶɨօռ ɨռʋօʟʋɛɖ.

Ƒօʀ `քʊֆɦ`, ɨʄ ȶɦɛ օʟɖ ʟɛռ (ɮɛʄօʀɛ քʊֆɦ աǟֆ ƈǟʟʟɛɖ) ɨֆ 0, ȶɦɛռ աɛ աǟռȶ ȶօ աʀɨȶɛ
ȶօ ȶɦɛ 0ȶɦ ɨռɖɛӼ. Ֆօ աɛ ֆɦօʊʟɖ օʄʄֆɛȶ ɮʏ ȶɦɛ օʟɖ ʟɛռ.

<!-- ignore: simplified code -->
```rust,ignore
pub fn push(&mut self, elem: T) {
    if self.len == self.cap { self.grow(); }

    unsafe {
        ptr::write(self.ptr.as_ptr().add(self.len), elem);
    }

    // Can't fail, we'll OOM first.
    self.len += 1;
}
```

Ɛǟֆʏ! Ӈօա ǟɮօʊȶ `քօք`? Ǟʟȶɦօʊɢɦ ȶɦɨֆ ȶɨʍɛ ȶɦɛ ɨռɖɛӼ աɛ աǟռȶ ȶօ ǟƈƈɛֆֆ ɨֆ
ɨռɨȶɨǟʟɨʐɛɖ, Ʀʊֆȶ աօռ'ȶ ʝʊֆȶ ʟɛȶ ʊֆ ɖɛʀɛʄɛʀɛռƈɛ ȶɦɛ ʟօƈǟȶɨօռ օʄ ʍɛʍօʀʏ ȶօ ʍօʋɛ
ȶɦɛ ʋǟʟʊɛ օʊȶ, ɮɛƈǟʊֆɛ ȶɦǟȶ աօʊʟɖ ʟɛǟʋɛ ȶɦɛ ʍɛʍօʀʏ ʊռɨռɨȶɨǟʟɨʐɛɖ! Ƒօʀ ȶɦɨֆ աɛ
ռɛɛɖ `քȶʀ::ʀɛǟɖ`, աɦɨƈɦ ʝʊֆȶ ƈօքɨɛֆ օʊȶ ȶɦɛ ɮɨȶֆ ʄʀօʍ ȶɦɛ ȶǟʀɢɛȶ ǟɖɖʀɛֆֆ ǟռɖ
ɨռȶɛʀքʀɛȶֆ ɨȶ ǟֆ ǟ ʋǟʟʊɛ օʄ ȶʏքɛ Ƭ. Ƭɦɨֆ աɨʟʟ ʟɛǟʋɛ ȶɦɛ ʍɛʍօʀʏ ǟȶ ȶɦɨֆ ǟɖɖʀɛֆֆ
ʟօɢɨƈǟʟʟʏ ʊռɨռɨȶɨǟʟɨʐɛɖ, ɛʋɛռ ȶɦօʊɢɦ ȶɦɛʀɛ ɨֆ ɨռ ʄǟƈȶ ǟ քɛʀʄɛƈȶʟʏ ɢօօɖ ɨռֆȶǟռƈɛ
օʄ Ƭ ȶɦɛʀɛ.

Ƒօʀ `քօք`, ɨʄ ȶɦɛ օʟɖ ʟɛռ ɨֆ 1, ʄօʀ ɛӼǟʍքʟɛ, աɛ աǟռȶ ȶօ ʀɛǟɖ օʊȶ օʄ ȶɦɛ 0ȶɦ
ɨռɖɛӼ. Ֆօ աɛ ֆɦօʊʟɖ օʄʄֆɛȶ ɮʏ ȶɦɛ ռɛա ʟɛռ.

<!-- ignore: simplified code -->
```rust,ignore
pub fn pop(&mut self) -> Option<T> {
    if self.len == 0 {
        None
    } else {
        self.len -= 1;
        unsafe {
            Some(ptr::read(self.ptr.as_ptr().add(self.len)))
        }
    }
}
```
